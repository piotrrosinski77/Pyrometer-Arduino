\chapter{Podsumowanie}

Wyniki testów zostały przedstawione w tabeli \ref{tab:pomiary}. Obserwacje wskazują, że:
\begin{itemize}
\item Wyniki pirometru przemysłowego są zbliżone do wyników pirometru testowego, z odchyleniem nieprzekraczającym 4°C w najwyższych temperaturach.
\item Pirometr przemysłowy, jako urządzenie profesjonalne, rejestruje wyższe wartości
temperatur w całym zakresie. Rozbieżności te mogą być związane z niedoskonałością
kalibracji pirometru Arduino, lub ograniczoną rozdzielczością czujnika MLX90614.
\item Termometr stykowy wykazuje wyższe różnice w niższych temperaturach, co
może wynikać z bezwładności termicznej sondy stykowej lub nierównomierności.\item Wraz ze wzrostem temperatury, różnice między wynikami z pirometru Arduino
a pirometru przemysłowego stają się bardziej widoczne. Pirometr Arduino
odnotowuje wartości niższe niż pirometr przemysłowy w wyższych zakresach
temperatur (powyżej 120°C), co sugeruje możliwość systematycznych błędów
wynikających z niedoskonałości kalibracji. \item Wraz ze wzrostem temperatury, różnice między wynikami z pirometru Arduino a pirometru przemysłowego stają się bardziej widoczne. Pirometr Arduino
odnotowuje wartości niższe niż pirometr przemysłowy w wyższych zakresach
temperatur (powyżej 120°C), co sugeruje możliwość systematycznych błędów
wynikających z niedoskonałości kalibracji.
\item Wraz ze wzrostem temperatury, różnice między wynikami z pirometru Arduino
a pirometru przemysłowego stają się bardziej widoczne. Pirometr Arduino
odnotowuje wartości niższe niż pirometr przemysłowy w wyższych zakresach
temperatur (powyżej 120°C), co sugeruje możliwość systematycznych błędów
wynikających z niedoskonałości kalibracji.
\end{itemize}

Podsumowując, pirometr spełnia założenia projektowe i może być stosowany do bezkontaktowego pomiaru temperatury w zakresie od 35°C do 160°C.

%\section{Potencjalne przyczyny błędów}
\begin{itemize}
    \item \textbf{Emisyjność:} Ustawienia emisyjności mają kluczowy wpływ na wyniki pomiarów. Niedokładne dobranie tej wartości dla badanych materiałów może prowadzić do błędów w pomiarach.
    \item \textbf{Kalibracja:} Pirometr Arduino, jako urządzenie prototypowe, nie posiada profesjonalnej kalibracji fabrycznej, co wpływa na dokładność pomiarów.
    \item \textbf{Czujnik MLX90614:} Czujnik zastosowany w urządzeniu charakteryzuje się ograniczoną dokładnością w wyższych zakresach temperatur, co mogło wpłynąć na odchylenia w pomiarach.
    \item \textbf{Wpływ środowiska:} Czynniki takie jak wilgotność, temperatura otoczenia czy odbicia promieniowania podczerwonego mogą wprowadzać dodatkowe błędy.
\end{itemize}

%\addcontentsline{toc}{chapter}{Bibliografia}

\input{bib.tex}

\chapter*{Dodatki}

\section*{Pełny listing kodu źródłowego}

\begin{lstlisting}[style=mystyle]
    #include <Arduino.h>
    #include <Adafruit_MLX90614.h>
    #include <LiquidCrystal_I2C.h>
    #include <math.h>
    
    // Define buttons
    #define BTN1 2
    #define BTN2 3
    #define BTN3 4
    #define BTN4 5
    
    // Set I2C address for the LCD (change if needed, e.g., 0x27)
    LiquidCrystal_I2C lcd(0x27, 16, 2); // 16 chars, 2 lines
    
    // Custom epsilon character
    byte epsilon[8] = { B00000, B00000, B01110, B10000, B11110, B10000, B01110, B00000 };
    
    // Initialize MLX90614 sensor
    Adafruit_MLX90614 mlx = Adafruit_MLX90614();
    float ems = 1.0;
    // Default emissivity
    int tempScale = 0; // 0 - Celsius, 1 - Fahrenheit, 2 - Kelvin
    
    float correctTemperature(float measuredTemp, float ambientTemp, float emissivity) {
        float measuredTempK = measuredTemp + 273.15;
        float ambientTempK = ambientTemp + 273.15;
        float trueTempK = pow((pow(measuredTempK, 4) - (1 - emissivity) * pow(ambientTempK, 4)) / emissivity, 0.25);
        return trueTempK - 273.15;
    }
    
    void setup() {
        delay(200);
        pinMode(BTN1, INPUT_PULLUP);
        pinMode(BTN2, INPUT_PULLUP);
        pinMode(BTN3, INPUT_PULLUP);
        pinMode(BTN4, INPUT_PULLUP);
        Serial.begin(9600);
        lcd.init();
        lcd.clear();
        lcd.backlight();
        lcd.setCursor(0, 0);
        lcd.createChar(0, epsilon);
        if (isnan(ems)) {
            ems = 1.0;
        }
        if (!mlx.begin()) {
            lcd.setCursor(0, 1);
            lcd.print("MLX error!");
            Serial.print("MLX error!\n");
            while (1);
        }
    }
    
    void loop() {
        int BTN1V = digitalRead(BTN1);
        int BTN2V = digitalRead(BTN2);
        int BTN3V = digitalRead(BTN3);
        int BTN4V = digitalRead(BTN4);
    
        if (!BTN1V && ems < 1.0) {
            Serial.println("Increased emissivity");
            ems += 0.01;
            if (ems > 1.0) ems = 1.0;
        }
    
        if (!BTN2V && ems > 0.0) {
            Serial.println("Decreased emissivity");
            ems -= 0.01;
            if (ems < 0.0) ems = 0.0;
        }
    
        if (!BTN3V) {
            Serial.println("Emissivity reset");
            ems = 1.0;
        }
    
        if (!BTN4V) {
            tempScale = (tempScale + 1) % 3;
            Serial.println(tempScale == 0 ? "Switched to Celsius" : (tempScale == 1 ? "Switched to Fahrenheit" : "Switched to Kelvin"));
            delay(300);
        }
    
        float ObjTemp = mlx.readObjectTempC();
        float AmbientTemp = mlx.readAmbientTempC();
        float correctedTemp = correctTemperature(ObjTemp, AmbientTemp, ems);
    
        if (isnan(correctedTemp)) {
            Serial.println("Read error: Temperature NaN");
            correctedTemp = 0.0;
        }
    
        float displayTemp = correctedTemp;
        char scaleLabel = 'C';
        bool showDegreeSymbol = true;
    
        if (tempScale == 1) {
            displayTemp = correctedTemp * 9.0 / 5.0 + 32.0;
            scaleLabel = 'F';
        } else if (tempScale == 2) {
            displayTemp = correctedTemp + 273.15;
            scaleLabel = 'K';
            showDegreeSymbol = false;
        }
    
        Serial.print("Temperature: ");
        Serial.print(displayTemp);
        Serial.print(" ");
        Serial.print(scaleLabel);
        Serial.print("\nEnvironment Temperature: ");
        Serial.print(AmbientTemp);
        Serial.print("\nEmissivity: ");
        Serial.println(ems);
    
        lcd.setCursor(0, 0);
        lcd.print("Temp:");
        lcd.print(displayTemp);
        if (showDegreeSymbol) {
            lcd.print((char)223);
        }
        lcd.print(scaleLabel);
    
        lcd.setCursor(0, 1);
        lcd.write(byte(0));
        lcd.print(":");
        lcd.print(ems);
        delay(500);
    \end{lstlisting}

    \chapter*{Program ćwiczenia dla studentów}